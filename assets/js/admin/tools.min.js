jQuery(function(s){s(document).ready(function(){const e=s(".everest-forms-tabs li"),t=s(".everest-forms-tab-content");e.on("click",function(){e.removeClass("active"),t.removeClass("active"),s(this).addClass("active"),s("#"+s(this).data("tab")).addClass("active")})}),s("#evf-settings-collapse").on("click",function(e){var t,o;e.preventDefault(),s(this).hasClass("close")?(s(this).closest("header").addClass("collapsed"),s(this).removeClass("close").addClass("open"),e="evf-settings-navCollapsed",t=!0,o=new Date,t={value:t,expiry:o.getTime()+864e5},localStorage.setItem(e,JSON.stringify(t))):(s(this).closest("header").removeClass("collapsed"),s(this).removeClass("open").addClass("close"),localStorage.removeItem("evf-settings-navCollapsed"))});var e=!0===t("evf-settings-navCollapsed")?"collapsed":"not-collapsed";function t(e){var t=localStorage.getItem(e);return!(!t||(t=JSON.parse(t),(new Date).getTime()>t.expiry&&(localStorage.removeItem(e),1)))}t("evf-settings-navCollapsed"),"collapsed"==e?(s(".everest-forms-header").addClass("collapsed"),s("#evf-settings-collapse").removeClass("close").addClass("open")):(s(".everest-forms-header").removeClass("collapsed"),s("#evf-settings-collapse").removeClass("open").addClass("close")),s("#log-viewer-select").on("click","h2 a.page-title-action-all",function(e){return e.stopImmediatePropagation(),window.confirm(everest_forms_admin_tools.delete_all_log_confirmation)}),s("#log-viewer-select").on("click","h2 a.page-title-action",function(e){return e.stopImmediatePropagation(),window.confirm(everest_forms_admin_tools.delete_log_confirmation)}),s("#everest-forms-form-migrator").on("change",function(){var t=s(this),e=t.val();void 0!==e&&""!==e&&(e={action:"everest_forms_form_migrator_forms_list",form_slug:e,security:everest_forms_form_migrator.evf_form_migrator_forms_list_nonce},s.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,beforeSend:function(){t.closest(".evf-fm-select-popular-form").append('<i class="evf-loading evf-loading-active"></i>')},success:function(e){!0===e.success?s(document).find("#evf-fm-forms-list-container").html(e.data.forms_list_table):s(document).find("#evf-fm-forms-list-container").html(e.data.message),t.closest(".evf-fm-select-popular-form").find(".evf-loading").remove()}}))}),s(document).ready(function(){function t(e,t){var o=s(document).find(".evf-fm-forms-table").data("form-slug");void 0!==o&&""!==o&&(o={action:"everest_forms_form_migrator",form_slug:o,form_ids:t,security:everest_forms_form_migrator.evf_form_migrator_nonce},s.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:o,beforeSend:function(){e.closest("td").append('<i class="evf-loading evf-loading-active"></i>'),s(".everest-froms-import_notice").remove()},success:function(e){s(".everest-froms-import_notice").remove(),s(".evf-loading").remove();var t,o="",o=!0===e.success?(t=e.data.form_data,s.each(t,function(e,t){!1!==t&&(t=s('button[data-form-id="'+e+'"]'),e=s('p[data-form-id="'+e+'"]'),s(t).prop("disabled",!1),s(e).text("Yes"))}),'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>"):'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>";s(document).find("#evf-fm-forms-list-container").prepend(o)}}))}s(document).on("click","#evf-fm-select-all",function(){var e=s(document).find(".evf-fm-select-single:visible");1==s(this).prop("checked")?s.each(e,function(e,t){s(t).attr("checked",!0),s(t).prop("checked",!0)}):s.each(e,function(e,t){s(t).attr("checked",!1),s(t).prop("checked",!1)})}),s(document).on("click",".evf-fm-select-single",function(){s(document).find("#evf-fm-select-all").prop("checked",!1)}),s(document).on("click",".evf-fm-page",function(){var e,t,o;s(this).hasClass("evf-fm-btn-active")||(s(".evf-fm-page").removeClass("evf-fm-btn-active"),s(this).addClass("evf-fm-btn-active"),o=s(document).find(".evf-fm-forms-table"),t=s(this).closest(".evf-fm-pagination").data("form-per-page"),t=(e=(s(this).data("page")-1)*t+1)+t-1,(o=o.find(".evf-fm-row")).addClass("evf-fm-hide-row"),o.slice(e-1,t).removeClass("evf-fm-hide-row"))}),s(document).on("click",".evf-fm-import-single",function(e){e.preventDefault();e=s(this).data("form-id");t(s(this),[e])}),s(document).on("click",".evf-fm-import-selected-btn",function(e){e.preventDefault();var e=s(document).find(".evf-fm-forms-table"),e=s(e).find("td .evf-fm-select-single:checked"),o=[];s.each(e,function(e,t){t=s(t).data("form-id");o.push(t)}),0!==o.length&&t(s(this),o)}),s(document).on("click",".evf-fm-import-entry",function(e){e.preventDefault();var t=s(this),e=s(document).find(".evf-fm-forms-table").data("form-slug"),o=t.data("form-id");void 0!==e&&""!==e&&(e={action:"everest_forms_form_entry_migrator",form_slug:e,form_id:o,security:everest_forms_form_migrator.evf_form_entry_migrator_nonce},s.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,beforeSend:function(){t.closest("td").append('<i class="evf-loading evf-loading-active"></i>'),s(".everest-froms-import_notice").remove()},success:function(e){s(".everest-froms-import_notice").remove(),s(".evf-loading").remove();var t="",t=!0===e.success?'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>":'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>";s(document).find("#evf-fm-forms-list-container").prepend(t)}}))})})});