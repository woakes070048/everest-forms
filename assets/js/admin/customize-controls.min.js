!function(r,l,s){"use strict";l.bind("ready",function(){r("#customize-info").find(".panel-title.site-title").text(s.panelTitle),r("#customize-info").find(".customize-panel-description:first").text(s.panelDescription),r("#customize-controls").addClass("wpeverest-customizer-style");t="form_id",e=window.location.search.substring(1);var o=new URLSearchParams(e).get(t),e="#customize-control-everest_forms_styles-"+o+"-typography-field_labels_font_color"+" .wp-color-result",t=r(e).attr("style");t&&(t=t.split(";").map(function(e){var t;return""!==e.trim()?([e,t]=e.split(":"),`${e.trim()}: ${t.trim()} !important`):""}).join("; "),r(e).removeAttr("style"),r(e).attr("style",t)),o&&(setTimeout(function(){[{className:"everest-forms-border_type_option",selectors:["-form_container-border_type","-field_styles-border_type","-file_upload_styles-border_type","-button-border_type","-success_message-border_type","-error_message-border_type","-validation_message-border_type"]},{className:"everest-forms-padding_option",selectors:["-form_container-padding","-typography-field_labels_padding","-typography-field_sublabels_padding","-typography-field_styles_padding","-typography-section_title_padding","-typography-file_upload_padding","-typography-button_padding"]},{className:"everest-forms-border_option",selectors:["-form_container-border_width","-form_container-border_color","-field_styles-border_width","-file_upload_styles-border_width","-button-border_width","-success_message-border_width","-success_message-border_color","-error_message-border_width","-error_message-border_color","-validation_message-border_width","-validation_message-border_color"]},{className:"everest-forms-background_image_option",selectors:["-form_container-background_preset","-form_container-background_position","-form_container-background_size","-form_container-background_repeat","-form_container-background_attachment","-form_container-opacity"]},{className:"everest-forms-typography_font_option",selectors:["-typography-field_labels_font_size","-typography-field_labels_font_color","-typography-field_labels_font_style","-typography-field_labels_text_alignment","-typography-field_labels_line_height","-typography-field_labels_margin","-typography-field_sublabels_font_size","-typography-field_sublabels_font_color","-typography-field_sublabels_font_style","-typography-field_sublabels_text_alignment","-typography-field_sublabels_line_height","-typography-field_sublabels_margin","-typography-field_sublabels_font_size","-typography-field_styles_font_size","-typography-field_styles_font_color","-typography-field_styles_font_size","-typography-field_styles_placeholder_font_color","-typography-field_styles_font_style","-typography-field_styles_alignment","-typography-field_styles_border_color","-typography-field_styles_border_focus_color","-typography-field_styles_background_color","-typography-field_styles_margin","-typography-field_description_font_size","-typography-field_description_font_color","-typography-field_description_font_style","-typography-field_description_text_alignment","-typography-field_description_line_height","-typography-field_description_margin","-typography-section_title_font_size","-typography-section_title_font_color","-typography-section_title_font_style","-typography-section_title_text_alignment","-typography-section_title_line_height","-typography-section_title_margin","-typography-file_upload_font_size","-typography-file_upload_font_color","-typography-file_upload_background_color","-typography-file_upload_icon_background_color","-typography-file_upload_icon_color","-typography-file_upload_border_color","-typography-file_upload_margin","-typography-checkbox_radio_font_size","-typography-checkbox_radio_font_color","-typography-checkbox_radio_font_style","-typography-checkbox_radio_alignment","-typography-checkbox_radio_size","-typography-checkbox_radio_color","-typography-checkbox_radio_checked_color","-typography-checkbox_radio_margin","-typography-button_font_size","-typography-button_font_style","-typography-button_font_color","-typography-button_hover_font_color","-typography-button_background_color","-typography-button_hover_background_color","-typography-button_alignment","-typography-button_border_color","-typography-button_border_hover_color","-typography-button_line_height","-typography-button_margin","-success_message-font_size","-success_message-font_style","-success_message-text_alignment","-error_message-font_size","-error_message-font_style","-error_message-text_alignment","-validation_message-font_size","-validation_message-font_style","-validation_message-text_alignment"]}].forEach(function(t){t.selectors.forEach(function(e){r("#customize-control-everest_forms_styles-"+o+e).addClass(t.className)})})},3e3),""===_evfCustomizeControlsL10n.is_pro)&&document.querySelectorAll(`input[name="${`image-radio-everest_forms_styles[${o}][template]`}"]`).forEach(e=>{["layout-five","layout-six","layout-seven","layout-eight","layout-ten","layout-eleven"].includes(e.value)&&e.classList.add("everest-forms-pro-template")})}),l.ToggleControl=l.Control.extend({ready:function(){var t=this;t.container.on("change","input:checkbox",function(){var e=!!this.checked;t.setting.set(e)})}}),l.SliderControl=l.Control.extend({ready:function(){var o=this,e=o.container,t=e.find(".everest-forms-slider"),n=e.find('.everest-forms-slider-input input[type="number"]'),e=Number(n.attr("min")),i=Number(n.attr("max")),a=Number(n.attr("step"));t.slider({range:"min",min:e,max:i,value:n.val(),step:a,slide:function(e,t){n.val(t.value).keyup()},change:function(e,t){o.setting.set(t.value)}}),o.container.on("click",".reset",function(e){e.preventDefault(),t.slider("option","value",o.params["default"])}),o.container.on("change keyup input","input.slider-input",function(e){("keyup"!==e.type&&"input"!==e.type||""!==r(this).val())&&t.slider("option","value",r(this).val())})}}),l.Select2Control=l.Control.extend({ready:function(){var e=this.container.find(".evf-select2");e.select2({minimumResultsForSearch:10,allowClear:!!e.data("allow_clear"),placeholder:e.data("placeholder")})}}),l.DimensionControl=l.Control.extend({ready:function(){var i=this,e=i.container,a=e.find(".dimension-input");i.container.find(".responsive-tabs li:not(:first)").hide(),i.container.on("keyup input",".dimension-input",function(){var o=r(this),e=o.attr("name"),t=parseInt(o.attr("min")),n=parseInt(o.attr("max"));o.val()<t&&o.val(o.attr("min")),o.val()>n&&o.val(o.attr("max")),i.is_anchor()?a.each(function(e,t){r(t).val(o.val()),i.saveValue(r(t).attr("name"),o.val())}):i.saveValue(e,o.val())}),i.container.on("change",'.dimension-unit-item input[type="radio"]',function(){i.saveValue("unit",r(this).val())}),i.container.on("change",".dimension-anchor",function(){r(this).is(":checked")?(r(this).parent("label").removeClass("unlinked").addClass("linked"),a.first().trigger("keyup")):r(this).parent("label").removeClass("linked").addClass("unlinked")}),i.container.on("change",'.responsive-tab-item input[type="radio"]',function(){var o=i.get_value(),n=r(this).val();o[n]!==undefined?(a.each(function(e,t){r(t).val(o[n][r(t).attr("name")])}),i.container.find('.dimension-unit-item input[value="'+o[n].unit+'"]').attr("checked","checked")):a.val(""),i.saveValue("top",e.find('input[name="top"]').val())}),i.container.on("click",".reset",function(e){e.preventDefault(),a.each(function(e,t){i.params["default"].desktop?(r(t).val(i.params["default"].desktop[r(t).attr("name")]),i.saveValue(r(t).attr("name"),i.params["default"].desktop[r(t).attr("name")])):(r(t).val(i.params["default"][r(t).attr("name")]),i.saveValue(r(t).attr("name"),i.params["default"][r(t).attr("name")]))})}),i.container.on("click",'.responsive-tab-item input[type="radio"]',function(){var e=r(this).val();r("#customize-controls").find('.responsive-tab-item input[type="radio"][value="'+e+'"]').prop("checked",!0).each(function(e,t){t=r(t).closest(".responsive-tab-item").closest("li");0===t.index()&&t.siblings().toggle()}),l.previewedDevice.set(e)})},is_anchor:function(){return r(this.container).find(".dimension-anchor").is(":checked")},selected_responsive:function(){return r(this.container).find('.responsive-tab-item input[type="radio"]:checked').val()},selected_unit:function(){return r(this.container).find('.dimension-unit-item input[type="radio"]:checked').val()},get_value:function(){return Object.assign({},this.setting._value)},saveValue:function(e,t){var o=this,n=o.container.find(".dimension-hidden-value"),i=o.get_value();!0===o.params.responsive?(undefined===i[o.selected_responsive()]&&(i[o.selected_responsive()]={}),i[o.selected_responsive()][e]=t,0<o.params.unit_choices.length&&(i[o.selected_responsive()].unit=o.selected_unit())):(i[e]=t,0<Object.keys(o.params.unit_choices).length&&(i.unit=o.selected_unit())),jQuery(n).val(JSON.stringify(i)).trigger("change"),o.setting.set(i)}}),l.ImageCheckboxControl=l.Control.extend({ready:function(){var e=this;e.container.on("change",'input[type="checkbox"]',function(){e.saveValue(r(this).val(),r(this).is(":checked"))})},saveValue:function(e,t){var o=this.container.find(".image-checkbox-hidden-value"),n=this.params.value;n[e]=t,n=Object.assign({},n),jQuery(o).val(JSON.stringify(n)).trigger("change"),this.setting.set(n)}}),l.ColorPaletteControl=l.Control.extend({ready:function(){var i=this;i.container.find("label").hasClass("evf-pro-palette")||(i.container.on("change",'input[type="checkbox"]',function(){var e=r(this).data("key"),t=r(this).val(),o=r("#customize-save-button-wrapper"),n=r(this).attr("name").match(/\[(\w+)\]$/)?.[1];o.find('input[type="submit"]').on("click",function(){n&&(document.cookie=`color_palette=${localStorage.getItem("color_palette",n)}; path=/`)}),document.cookie=`color_palette_save=${n}; path=/`,localStorage.setItem("color_palette",n),r(this).closest("li").find("label").addClass("evf-active-color-palette"),i.saveValue(e,t)}),i.container.on("click",".color-palette",function(){var e=r(this).closest(".customize-control-evf-color_palette");r(".customize-control-evf-color_palette").not(e).find("label").removeClass("evf-active-color-palette"),r(".customize-control-evf-color_palette").not(e).find('input[type="checkbox"]').prop("checked",!1),r(this).find('input[type="checkbox"]').prop("checked",!0).change()}),i.container.on("click",".color-palette-edit-icon",function(){var e=r(this).closest("label").attr("data-custom"),t=r(this),o=i.container.find(".color-palette-edit-interface");o.length?o.remove():e===undefined&&i.showEditInterface(),"evf-custom-color-palette"===e?"✎"===t.html()?(i.showEditInterface(),t.html("✖")):t.html("✎"):""===e&&r.confirm({title:"Edit Color Palette",content:_evfCustomizeControlsL10n.color_palette_edit_title+'<br><div style="color: #ff4d4f; padding-top: 10px;"><i class="fa fa-exclamation-triangle" aria-hidden="true" style="margin-right: 2px;"></i>'+_evfCustomizeControlsL10n.color_palette_edit_description+"</div>",theme:"modern",type:"red",boxWidth:"30%",useBootstrap:!1,backgroundDismiss:!0,buttons:{cancel:{text:"Cancel",btnClass:"btn-light",action:function(){t.html("✎")}},confirm:{text:"Confirm",btnClass:"btn-primary",action:function(){i.showEditInterface(),t.html("✖")}}},onOpenBefore:function(){}})}))},saveValue:function(e,t){var o=this.container.find(".color-palette-hidden-value"),n=this.setting.get();"object"!=typeof n&&(n={}),t&&(n[e]=t),r(o).val(JSON.stringify(n)).trigger("change"),r.each(n,(e,t)=>{!["0","1","2","3","4","5"].includes(e)&&!0!==t&&!1!==t||delete n[e]}),this.setting.set(n)},showEditInterface:function(){var t=this,e=`
				<div class="color-palette-edit-interface">
					<input type="text" class="color-palette-name-input" value="${t.params.label}-${Math.floor(10+90*Math.random())}" />
					<div class="color-palette-items">
						${Object.keys(t.params.choices).map(e=>`
							<div class="color-palette-edit-item">
								<label for="color-edit-${t.params.id}-${e}" data-key="${t.params.choices[e].name}">
									${t.params.choices[e].name.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}
								</label>
								<input id="color-edit-${t.params.id}-${e}" type="text" value="${t.params.choices[e].color}" class="color-picker"/>
							</div>
						`).join("")}
					</div>
					<button class="color-palette-save-button">Save</button>
				</div>
			`;t.container.append(e),t.container.find(".color-picker").wpColorPicker(),t.container.on("click",".color-palette-save-button",function(){"disabled"===r("#save.save").attr("disabled")?t.saveEditedColors():alert("Please save the unsaved changes to create the color palettes.")}),t.container.find(".color-palette-name-input").on("change",function(){t.params.label=r(this).val()})},saveEditedColors:function(){var e=this,o={};e.container.find(".color-palette-edit-item").each(function(){var e=r(this).find("label").data("key").trim().toLowerCase().replace(/color\s+.*/,""),t=r(this).find(".color-picker").val();o[e]=t}),e.setting.set(o),e.container.find(".color-palette-hidden-value").val(JSON.stringify(o)).trigger("change"),r.post(_evfCustomizeControlsL10n.ajax_url,{action:"save_custom_color_palette",form_id:_evfCustomizeControlsL10n.form_id,_nonce:_evfCustomizeControlsL10n.color_palette_nonce,colors:o,label:e.params.label}).done(function(e){e.success&&r.alert({title:'<span style="color: #28a745; font-weight: bold;"><span class="dashicons dashicons-yes"></span> Success!</span>',content:e.data,icon:"",theme:"modern",type:"green",boxWidth:"20%",useBootstrap:!1,backgroundDismiss:!0,buttons:{OK:{text:"OK",btnClass:"btn-green",action:function(){window.location.reload()}}},onOpenBefore:function(){this.$jconfirmBox.css({background:"#ffffff","border-top":"6px solid #198754","border-radius":"10px","box-shadow":"0px 4px 8px rgba(0, 0, 0, 0.1)",padding:"20px"}),this.$content.css({color:"#383838","font-size":"16px","line-height":"24px","text-align":"center"}),this.$title.css({"text-align":"center","margin-bottom":"10px",color:"#222222"}),this.$btnc.find(".btn-green").css({background:"#2271b1",color:"#fff",border:"1px solid #2271b1",padding:"10px 20px","border-radius":"5px","font-weight":"bold"})}})}).fail(function(e){}),e.container.find(".color-palette-edit-interface").remove()}}),l.controlConstructor=r.extend(l.controlConstructor,{"evf-color_palette":l.ColorPaletteControl,"evf-color":l.ColorControl,"evf-toggle":l.ToggleControl,"evf-slider":l.SliderControl,"evf-select2":l.Select2Control,"evf-dimension":l.DimensionControl,"evf-background":l.BackgroundControl,"evf-image_checkbox":l.ImageCheckboxControl,"evf-background_image":l.BackgroundImageControl}),r(function(){r.each(["font","form_container","field_styles","checkbox_radio_styles","button","success_message","error_message","validation_message","typography"],function(e,i){r.each({show_theme_font:{controls:["font_family"],callback:function(e){return!e}},border_type:{controls:["border_width","border_color"],callback:function(e){return"none"!==e}},checkbox_radio_style_variation:{controls:["checkbox_radio_size","checkbox_radio_color","checkbox_radio_checked_color"],callback:function(e){return"default"!==e}},background_image:{controls:["background_preset","background_position","background_size","background_repeat","background_attachment","opacity"],callback:function(e){return!!e}},show_submission_message:{controls:["font_size","font_style","text_alignment"],callback:function(e){return!!e}},field_labels:{controls:["field_labels_font_size","field_labels_font_color","field_labels_font_style","field_labels_text_alignment","field_labels_line_height","field_labels_margin","field_labels_padding"],callback:function(e){return!!e}},field_sublabels:{controls:["field_sublabels_font_size","field_sublabels_font_color","field_sublabels_font_style","field_sublabels_text_alignment","field_sublabels_line_height","field_sublabels_margin","field_sublabels_padding"],callback:function(e){return!!e}},field_description:{controls:["field_description_font_size","field_description_font_color","field_description_font_style","field_description_text_alignment","field_description_line_height","field_description_margin","field_description_padding"],callback:function(e){return!!e}},file_upload:{controls:["file_upload_font_size","file_upload_font_color","file_upload_font_style","file_upload_background_color","file_upload_icon_background_color","file_upload_icon_color","file_upload_border_color","file_upload_text_alignment","file_upload_line_height","file_upload_margin","file_upload_padding"],callback:function(e){return!!e}},checkbox_radio:{controls:["checkbox_radio_font_size","checkbox_radio_font_color","checkbox_radio_font_style","checkbox_radio_text_alignment","checkbox_radio_style_variation","checkbox_radio_line_height","checkbox_radio_margin","checkbox_radio_padding","checkbox_radio_alignment","checkbox_radio_size","checkbox_radio_color","checkbox_radio_checked_color"],callback:function(e){return!!e}},button:{controls:["button_font_size","button_font_color","button_font_style","button_text_alignment","button_line_height","button_margin","button_padding","button_border_hover_color","button_border_color","button_alignment","button_hover_background_color","button_hover_font_color","button_background_color"],callback:function(e){return!!e}},field_styles:{controls:["field_styles_font_size","field_styles_font_color","field_styles_font_style","field_styles_alignment","field_styles_border_width","field_styles_border_focus_color","field_styles_border_radius","field_styles_background_color","field_styles_margin","field_styles_padding","field_styles_border_type","field_styles_placeholder_font_color","field_styles_border_color"],callback:function(e){return!!e}},section_title:{controls:["section_title_font_size","section_title_font_color","section_title_font_style","section_title_text_alignment","section_title_line_height","section_title_margin","section_title_padding"],callback:function(e){return!!e}}},function(e,n){l("everest_forms_styles["+s.form_id+"]["+i+"]["+e+"]",function(o){r.each(n.controls,function(e,t){l.control("everest_forms_styles["+s.form_id+"]["+i+"]["+t+"]",function(t){var e=function(e){t.container.toggle(n.callback(e))};e(o.get()),o.bind(e)})})})})}),l.control("everest_forms_styles["+s.form_id+"][form_container][background_preset]",function(e){var n={"default":[!1,!1,!1,!1],fill:[!0,!1,!1,!1],fit:[!0,!1,!0,!1],repeat:[!0,!1,!1,!0],custom:[!0,!0,!0,!0]},i={"default":[_wpCustomizeBackground.defaults["default-position-x"],_wpCustomizeBackground.defaults["default-position-y"],_wpCustomizeBackground.defaults["default-size"],_wpCustomizeBackground.defaults["default-repeat"],_wpCustomizeBackground.defaults["default-attachment"]],fill:["left","top","cover","no-repeat","fixed"],fit:["left","top","contain","no-repeat","fixed"],repeat:["left","top","auto","repeat","scroll"]},t=function(o){_.each(["background_position","background_size","background_repeat","background_attachment"],function(e,t){t=l.control("everest_forms_styles["+s.form_id+"][form_container]["+t+"]");t&&t.container.toggle(n[o][e])})},o=function(o){_.each(["background_position_x","background_position_y","background_size","background_repeat","background_attachment"],function(e,t){e=l("everest_forms_styles["+s.form_id+"][form_container]["+e+"]");e&&e.set(i[o][t])})},a=e.setting.get();t(a),e.setting.bind("change",function(e){t(e),"custom"!==e&&o(e)})}),l.control("everest_forms_styles["+s.form_id+"][form_container][background_repeat]",function(t){t.elements[0].unsync(l("everest_forms_styles["+s.form_id+"][form_container][background_repeat]")),t.element=new l.Element(t.container.find("input")),t.element.set("no-repeat"!==t.setting()),t.element.bind(function(e){t.setting.set(e?"repeat":"no-repeat")}),t.setting.bind(function(e){t.element.set("no-repeat"!==e)})}),l.control("everest_forms_styles["+s.form_id+"][form_container][background_attachment]",function(t){t.elements[0].unsync(l("everest_forms_styles["+s.form_id+"][form_container][background_attachment]")),t.element=new l.Element(t.container.find("input")),t.element.set("fixed"!==t.setting()),t.element.bind(function(e){t.setting.set(e?"scroll":"fixed")}),t.setting.bind(function(e){t.element.set("fixed"!==e)})}),l.control("everest_forms_styles["+s.form_id+"][template]",function(e){e.elements[0].bind(function(e){t(e)})});var t=function(e){var n="everest_forms_styles["+s.form_id+"]";if("undefined"==typeof _evfCustomizeControlsL10n.templates[e])return!1;e=_evfCustomizeControlsL10n.templates[e].data;e&&r.each(e,function(o,e){r.each(e,function(e,t){i(n+"["+o+"]["+e+"]",t)})})},i=function(e,i){l.control(e,function(e){var o=e.container;switch(e.setting.set(i),e.params.type){case"evf-slider":o.find(".everest-forms-slider").slider("option","value",i);break;case"evf-select2":o.find(".evf-select2").trigger("change");break;case"evf-image_checkbox":var t=o.find(".image-checkbox-hidden-value");"string"!=typeof(n=i)?n=JSON.stringify(i):i=JSON.parse(i),t.val(n).trigger("change"),r.each(i,function(e,t){o.find('.image-checkbox-wrapper input[value="'+e+'"]').prop("checked",t)});break;case"evf-color-palette":t=o.find(".color-palette-hidden-value");"string"!=typeof(n=i)?n=JSON.stringify(i):i=JSON.parse(i),t.val(n).trigger("change"),r.each(i,function(e,t){o.find('.color-palette-wrapper input[value="'+e+'"]').prop("checked",t)});break;case"evf-dimension":var n=o.find('.responsive-tab-item input[type="radio"]:checked').val();void 0===n?r.each(i,function(e,t){o.find('input.dimension-input[name="'+e+'"]').val(t)}):"undefined"!=typeof i[n]&&r.each(i[n],function(e,t){o.find('input.dimension-input[name="'+e+'"]').val(t)})}})};r(function(){var o,n,e,t;"1"===_evfCustomizeControlsL10n.is_pro&&(e=_evfCustomizeControlsL10n.form_id,e=r("#customize-control-everest_forms_styles-"+e+"-template"),(t=r("<div id='everest-forms-save-template-container'></div>")).append(r('<span class="customize-control-title">Create Style Template</span>')),t.append(r('<span class="description customize-control-description">Create a new style template from current styles.</span>')),t.append(r("<input type='text' id='everest-forms-new-template-name' placeholder='Template Name' />")),t.append(r("<div><button class='button button-primary' id='everest-forms-save-template-button'>Create</button></div>")),e.before(t),t.find("div button").bind("click",function(e){if(e.preventDefault(),e.stopPropagation(),"disabled"===r("#save.save").attr("disabled")){e=r("#everest-forms-new-template-name").val();if(e.length)r.post(_evfCustomizeControlsL10n.ajax_url,{action:"save_template",name:e,form_id:_evfCustomizeControlsL10n.form_id,_nonce:_evfCustomizeControlsL10n.save_nonce}).done(function(t){if(t.success)l.control("everest_forms_styles["+s.form_id+"][template]",function(e){e.setting.set(t.data.template_id);l.previewer.save();l.bind("saved",function(){location.reload()})});else alert(t.data.message)});else alert("Please provide a suitable template name and try again.")}else alert("Please save the unsaved changes to create the template.")}),e=_evfCustomizeControlsL10n.form_id,e=r("#customize-control-everest_forms_styles-"+e+"-template").find(".image-radio-wrapper li"),o=r('<span class="evf-delete-template-btn dashicons dashicons-no" title="Delete Template"></span>'),e.each(function(){var e,t=r(this);["default","layout-two","layout-three","layout-four","layout-five","layout-six","layout-seven","layout-eight","layout-nine","layout-ten","layout-eleven"].includes(t.find("input").val())||((e=o.clone().hide()).bind("click",function(){confirm("Are you sure you want to delete this template ?")&&n(t)}),t.append(e),t.bind("mouseover",function(){e.show()}),t.bind("mouseout",function(){e.hide()}))}),n=function(e){var t=r(e),e=t.find("input").val();r.post(_evfCustomizeControlsL10n.ajax_url,{action:"delete_template",name:e,_nonce:_evfCustomizeControlsL10n.delete_nonce}).done(function(e){e.success&&t.remove()})})})})}(jQuery,wp.customize,_evfCustomizeControlsL10n);